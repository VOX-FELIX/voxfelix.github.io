<script>
    // Load Firebase from CDN
    document.write(`
        <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js"><\/script>
        <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js"><\/script>
    `);

    // 🔑 Replace with your Firebase config
    const firebaseConfig = {
        apiKey: "YOUR-API-KEY",
        authDomain: "your-app.firebaseapp.com",
        projectId: "your-app-id",
        storageBucket: "your-app.appspot.com",
        messagingSenderId: "your-messaging-id",
        appId: "your-app-id"
    };

    // Initialize Firebase
    document.addEventListener("DOMContentLoaded", function () {
        firebase.initializeApp(firebaseConfig);
        const auth = firebase.auth();

        // Define allowed emails
        const allowedEmails = [
        "seankerr@novawerke.ai",
 	    “dkerr14@jh.edu”,
        "qiuhaoalex@gmail.com”,
        "csnelli1@jh.edu”,
        "ctighe4@jh.edu”,
        "ltesta1@jh.edu”,
        "lmirele2@jh.edu”,
        "michelevanzaldua@gmail.com”,
        "snellingstephen91@gmail.com”,
        "nburton8@jh.edu”,
        "rchin7@jh.edu”,
        "sstein28@jh.edu”,
        “mtorre44@jh.edu”,
        “mattwalter35@gmail.com”,
        ];

        // Attach event listeners after Firebase loads
        document.getElementById("registerBtn").addEventListener("click", function () {
            register(auth, allowedEmails);
        });

        document.getElementById("loginBtn").addEventListener("click", function () {
            login(auth);
        });

        document.getElementById("resetBtn").addEventListener("click", function () {
            resetPassword(auth);
        });
    });

    function login(auth) {
        const email = document.getElementById("email").value;
        const password = document.getElementById("password").value;

        auth.signInWithEmailAndPassword(email, password)
            .then(() => {
                localStorage.setItem("auth", "true");
                window.location.href = "developer.html";
            })
            .catch(error => {
                document.getElementById("message").innerText = error.message;
            });
    }

    function register(auth, allowedEmails) {
        const email = document.getElementById("email").value;
        const password = document.getElementById("password").value;

        if (!allowedEmails.includes(email)) {
            document.getElementById("message").innerText = "Your email is not authorized to register.";
            return;
        }

        auth.createUserWithEmailAndPassword(email, password)
            .then(() => {
                alert("Account created! You can now log in.");
            })
            .catch(error => {
                document.getElementById("message").innerText = error.message;
            });
    }

    function resetPassword(auth) {
        const email = document.getElementById("email").value;

        auth.sendPasswordResetEmail(email)
            .then(() => {
                alert("Password reset email sent!");
            })
            .catch(error => {
                document.getElementById("message").innerText = error.message;
            });
    }
</script>
